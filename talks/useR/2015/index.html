<!DOCTYPE html>
<html>
<head>
  <title>Manipulation of Discrete Random Variables in R with discreteRV</title>

  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="generator" content="pandoc" />




  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="stylesheet" media="all" href="index_files/ioslides-13.5.1/fonts/fonts.css">

  <link rel="stylesheet" media="all" href="index_files/ioslides-13.5.1/theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="index_files/ioslides-13.5.1/theme/css/phone.css">

  <base target="_blank">

  <script type="text/javascript">
    var SLIDE_CONFIG = {
      // Slide settings
      settings: {
                title: 'Manipulation of Discrete Random Variables in R with discreteRV',
                        useBuilds: true,
        usePrettify: true,
        enableSlideAreas: true,
        enableTouch: true,
              },

      // Author information
      presenters: [
            {
        name:  'Eric Hare, Andreas Buja, Heike Hofmann' ,
        company: '',
        gplus: '',
        twitter: '',
        www: '',
        github: ''
      },
            ]
    };
  </script>

  <style type="text/css">

    b, strong {
      font-weight: bold;
    }

    em {
      font-style: italic;
    }

    slides > slide {
      -webkit-transition: all 0.4s ease-in-out;
      -moz-transition: all 0.4s ease-in-out;
      -o-transition: all 0.4s ease-in-out;
      transition: all 0.4s ease-in-out;
    }

    .auto-fadein {
      -webkit-transition: opacity 0.6s ease-in;
      -webkit-transition-delay: 0.4s;
      -moz-transition: opacity 0.6s ease-in 0.4s;
      -o-transition: opacity 0.6s ease-in 0.4s;
      transition: opacity 0.6s ease-in 0.4s;
      opacity: 0;
    }

  </style>

  <link rel="stylesheet" href="styles.css" type="text/css" />


</head>

<body style="opacity: 0">

<slides class="layout-widescreen">

  <slide class="title-slide segue nobackground">
        <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 data-config-title><!-- populated from slide_config.json --></h1>
      <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p data-config-presenter><!-- populated from slide_config.json --></p>
            <p style="margin-top: 6px; margin-left: -2px;">July 2, 2015</p>
          </hgroup>
  </slide>

<slide class=''><hgroup><h2>discreteRV</h2></hgroup><article  id="discreterv">

<p>Manipulation of Discrete Random Variables</p>

<ul>
<li>Goal: Thorough, powerful interface for working with discrete random variables in R</li>
<li>Use a syntax consistent with introductory statistics texts</li>
<li>Based on idea and code by Andreas Buja (Wharton School of Business)</li>
<li>My contribution: additional functionality, packaging, documentation, and write-up</li>
</ul>

<p>Follow along at: <a href='http://erichare.me/talks/useR/2015' title=''>http://erichare.me/talks/useR/2015</a></p>

</article></slide><slide class=''><hgroup><h2>Installing discreteRV</h2></hgroup><article  id="installing-discreterv">

<p>discreteRV is available on CRAN (stable) and GitHub (development)</p>

<ol>
<li><p>Install from CRAN or GitHub</p>

<pre class = 'prettyprint lang-r'>install.packages(&quot;discreteRV&quot;)
# or...
library(devtools)
install_github(&quot;erichare/discreteRV&quot;)</pre></li>
<li><p>Load the package</p>

<pre class = 'prettyprint lang-r'>library(discreteRV)</pre></li>
</ol>

</article></slide><slide class=''><hgroup><h2>Creating discrete random variables</h2></hgroup><article  id="creating-discrete-random-variables">

<p>Let X be a random variable representing a single toss of a fair die. X takes on the values 1 to 6 with probability \(\frac{1}{6}\)</p>

<p>\(P(X = x) = \frac{1}{6} \ \ \ \ x \in \{1, 2, 3, 4, 5, 6\}\)</p>

<p>In discreteRV,</p>

<pre class = 'prettyprint lang-r'>X &lt;- RV(1:6)
X &lt;- RV(1:6, probs = rep(1/6, 6)) # Equivalent
    
X</pre>

<pre >## Random variable with 6 outcomes
## 
## Outcomes   1   2   3   4   5   6
## Probs    1/6 1/6 1/6 1/6 1/6 1/6</pre>

</article></slide><slide class=''><hgroup><h2>Creating discrete random variables (continued)</h2></hgroup><article  id="creating-discrete-random-variables-continued">

<p>Let Y be distributed according to a poisson random variable with mean parameter 5.</p>

<p>\(P(Y = y) = \frac{\lambda^ye^{-\lambda}}{y!} \ \ \ \ y \in \{0, 1, ...\}\)</p>

<pre class = 'prettyprint lang-r'>lambda &lt;- 5
y &lt;- 0:100
Y &lt;- RV(y, (lambda^y * exp(-lambda)) / factorial(y))

Y &lt;- RV(&quot;poisson&quot;, lambda = 5, fractions = FALSE)
Y</pre>

<pre >## Random variable with outcomes from 0 to Inf 
## 
## Outcomes     0     1     2     3     4     5     6     7     8     9    10    11
## Probs    0.007 0.034 0.084 0.140 0.175 0.175 0.146 0.104 0.065 0.036 0.018 0.008
## 
## Displaying first 12 outcomes</pre>

</article></slide><slide class=''><hgroup><h2>Plot Method</h2></hgroup><article  id="plot-method">

<pre class = 'prettyprint lang-r'>plot(X)</pre>

<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" title="" alt="" width="720" style="display: block; margin: auto;" /></p>

</article></slide><slide class=''><hgroup><h2>Probability Functions</h2></hgroup><article  id="probability-functions">

<p>discreteRV features probability functions which have a syntax very similar to Casella &amp; Berger:</p>

<pre class = 'prettyprint lang-r'>P(X &gt; 3)</pre>

<pre >## [1] 0.5</pre>

<pre class = 'prettyprint lang-r'>P(X &lt; 1 | X &gt;= 5)</pre>

<pre >## [1] 0</pre>

</article></slide><slide class=''><hgroup><h2>Probability Functions (continued)</h2></hgroup><article  id="probability-functions-continued">

<pre class = 'prettyprint lang-r'>E(X)</pre>

<pre >## [1] 3.5</pre>

<pre class = 'prettyprint lang-r'>V(X)</pre>

<pre >## [1] 2.916667</pre>

<pre class = 'prettyprint lang-r'>SD(X)</pre>

<pre >## [1] 1.707825</pre>

</article></slide><slide class=''><hgroup><h2>Probability Functions (continued)</h2></hgroup><article  id="probability-functions-continued-1">

<pre class = 'prettyprint lang-r'>E(Y)</pre>

<pre >## [1] 5</pre>

<pre class = 'prettyprint lang-r'>V(Y)</pre>

<pre >## [1] 4.999995</pre>

<pre class = 'prettyprint lang-r'>SD(Y)</pre>

<pre >## [1] 2.236067</pre>

</article></slide><slide class=''><hgroup><h2>Joint Distributions</h2></hgroup><article  id="joint-distributions">

<p>discreteRV allows easy computation of joint distributions:</p>

<pre class = 'prettyprint lang-r'>iid(X, n = 2, fractions = TRUE)</pre>

<pre >## Random variable with 36 outcomes
## 
## Outcomes  1,1  1,2  1,3  1,4  1,5  1,6  2,1  2,2  2,3  2,4  2,5  2,6
## Probs    1/36 1/36 1/36 1/36 1/36 1/36 1/36 1/36 1/36 1/36 1/36 1/36
## 
## Displaying first 12 outcomes</pre>

</article></slide><slide class=''><hgroup><h2>Joint Distributions (continued)</h2></hgroup><article  id="joint-distributions-continued">

<p>Joint distributions need not be iid:</p>

<pre class = 'prettyprint lang-r'>AB &lt;- jointRV(list(1:3, 0:2), probs = 1:9 / sum(1:9))
AB</pre>

<pre >## Random variable with 9 outcomes
## 
## Outcomes  1,0  1,1  1,2  2,0  2,1  2,2  3,0  3,1  3,2
## Probs    1/45 2/45 1/15 4/45  1/9 2/15 7/45 8/45  1/5</pre>

</article></slide><slide class=''><hgroup><h2>Manipulating Joint Distributions</h2></hgroup><article  id="manipulating-joint-distributions">

<pre class = 'prettyprint lang-r'>(A &lt;- marginal(AB, 1))</pre>

<pre >## Random variable with 3 outcomes
## 
## Outcomes    1    2    3
## Probs    2/15  1/3 8/15</pre>

<pre class = 'prettyprint lang-r'>(B &lt;- marginal(AB, 2))</pre>

<pre >## Random variable with 3 outcomes
## 
## Outcomes    0    1    2
## Probs    4/15  1/3  2/5</pre>

</article></slide><slide class=''><hgroup><h2>Conditional Distributions</h2></hgroup><article  id="conditional-distributions">

<pre class = 'prettyprint lang-r'>independent(A, B)</pre>

<pre >## [1] FALSE</pre>

<pre class = 'prettyprint lang-r'>P(A == 1 | B == 1)</pre>

<pre >## [1] 0.1333333</pre>

<pre class = 'prettyprint lang-r'>P(A == 1 | B == 2)</pre>

<pre >## [1] 0.1666667</pre>

</article></slide><slide class=''><hgroup><h2>More Conditionals</h2></hgroup><article  id="more-conditionals">

<pre class = 'prettyprint lang-r'>P(A &lt; B)</pre>

<pre >## [1] 0.06666667</pre>

<pre class = 'prettyprint lang-r'>E(A | B == 1)</pre>

<pre >## [1] 2.4</pre>

<pre class = 'prettyprint lang-r'>A | B == 1</pre>

<pre >## Random variable with 3 outcomes
## 
## Outcomes    1    2    3
## Probs    2/15  1/3 8/15</pre>

</article></slide><slide class=''><hgroup><h2>Sum of Random Variables</h2></hgroup><article  id="sum-of-random-variables">

<p>We can obtain a new random variable by summing independent realizations of a random variable:</p>

<pre class = 'prettyprint lang-r'>SofIID(X, n = 2, fractions = TRUE)</pre>

<pre >## Random variable with 11 outcomes
## 
## Outcomes    2    3    4    5    6    7    8    9   10   11   12
## Probs    1/36 1/18 1/12  1/9 5/36  1/6 5/36  1/9 1/12 1/18 1/36</pre>

</article></slide><slide class=''><hgroup><h2>More Convenient Notation</h2></hgroup><article  id="more-convenient-notation">

<p>The <code>+</code> and <code>*</code> operators have been overloaded for convenience:</p>

<pre class = 'prettyprint lang-r'>A * B</pre>

<pre >## Random variable with 9 outcomes
## 
## Outcomes    1,0    1,1    1,2    2,0    2,1    2,2    3,0    3,1    3,2
## Probs     8/225   2/45   4/75   4/45    1/9   2/15 32/225   8/45  16/75</pre>

<pre class = 'prettyprint lang-r'>A + B</pre>

<pre >## Random variable with 5 outcomes
## 
## Outcomes     1     2     3     4     5
## Probs    8/225  2/15 23/75 14/45 16/75</pre>

</article></slide><slide class=''><hgroup><h2>Simulations</h2></hgroup><article  id="simulations">

<p>We can simulate trials from any defined random variable:</p>

<pre class = 'prettyprint lang-r'>X.sim &lt;- rsim(X, 10)
X.sim</pre>

<pre >## Simulated Vector:  1 5 1 6 4 4 2 5 4 4 
## 
## Random variable with 6 outcomes
## 
## Outcomes   1   2   3   4   5   6
## Probs    1/6 1/6 1/6 1/6 1/6 1/6</pre>

</article></slide><slide class=''><hgroup><h2>Simulations (continued)</h2></hgroup><article  id="simulations-continued">

<pre class = 'prettyprint lang-r'>plot(X.sim)</pre>

<p><img src="index_files/figure-html/unnamed-chunk-17-1.png" title="" alt="" width="720" style="display: block; margin: auto;" /></p>

</article></slide><slide class=''><hgroup><h2>Extended Example: Playing Craps</h2></hgroup><article  id="extended-example-playing-craps">

<p>Craps is a common dice game played in casinos. The game begins with what is called the &quot;Come Out&quot; roll, in which two fair dice are rolled.</p>

<ul>
<li>If a sum of seven or eleven is obtained, the player wins.</li>
<li>If a sum of two, three, or twelve is obtained, the player loses.</li>
<li>In all other cases, the roll obtained is declared the &quot;Point&quot; and the player rolls again in an attempt to obtain this same point value. If the player rolls the Point, they win, but if they roll a seven, they lose. Rolls continue until one of these two outcomes is achieved.</li>
</ul>

</article></slide><slide class=''><hgroup><h2>Playing Craps: The Roll</h2></hgroup><article  id="playing-craps-the-roll">

<p>We begin by creating a random variable representing the result of a single roll (the sum of two fair dice):</p>

<pre class = 'prettyprint lang-r'>(Roll &lt;- RV(1:6) + RV(1:6))</pre>

<pre >## Random variable with 11 outcomes
## 
## Outcomes    2    3    4    5    6    7    8    9   10   11   12
## Probs    1/36 1/18 1/12  1/9 5/36  1/6 5/36  1/9 1/12 1/18 1/36</pre>

</article></slide><slide class=''><hgroup><h2>Results Conditioned on Game Ending After First Roll</h2></hgroup><article  id="results-conditioned-on-game-ending-after-first-roll">

<pre class = 'prettyprint lang-r'>P(Roll %in% c(7, 11) | Roll %in% c(7, 11, 2, 3, 12))</pre>

<pre >## [1] 0.6666667</pre>

<pre class = 'prettyprint lang-r'>P(Roll %in% c(2, 3, 12) | Roll %in% c(7, 11, 2, 3, 12))</pre>

<pre >## [1] 0.3333333</pre>

</article></slide><slide class=''><hgroup><h2>Probability of Winning Game Within Two Rolls</h2></hgroup><article  id="probability-of-winning-game-within-two-rolls">

<pre class = 'prettyprint lang-r'>TwoRolls &lt;- iid(Roll, 2)

First &lt;- marginal(TwoRolls, 1)
Second &lt;- marginal(TwoRolls, 2)

P(First %in% c(7, 11) %OR% (First %in% 4:10 %AND% (First == Second)))</pre>

<pre >## [1] 0.2993827</pre>

</article></slide><slide class=''><hgroup><h2>Winning Craps</h2></hgroup><article  id="winning-craps">

<pre class = 'prettyprint lang-r'>craps_game &lt;- function(RV) {
    
    my.roll &lt;- rsim(RV, 1)
    
    if (my.roll %in% c(7, 11)) { return(1) }
    else if (my.roll %in% c(2, 3, 12)) { return(0) }
    else {
        new.roll &lt;- 0
        while (new.roll != my.roll &amp; new.roll != 7) {
            new.roll &lt;- rsim(RV, 1)
        }
        
        return(as.numeric(new.roll == my.roll))
    }
}</pre>

</article></slide><slide class=''><hgroup><h2>Winning Craps (continued)</h2></hgroup><article  id="winning-craps-continued">

<pre class = 'prettyprint lang-r'>sim.results &lt;- replicate(100000, craps_game(Roll))
mean(sim.results)</pre>

<pre >## [1] 0.491</pre>

</article></slide><slide class=''><hgroup><h2>Special Thanks</h2></hgroup><article  id="special-thanks">

<p>Dr. Andreas Buja, Wharton School, University of Pennsylvania Dr. Heike Hofmann, Department of Statistics, Iowa State University</p>

</article></slide><slide class=''><hgroup><h2>Thank You</h2></hgroup><article  id="thank-you">

<p>Any questions?</p></article></slide>


  <slide class="backdrop"></slide>

</slides>

<script src="index_files/ioslides-13.5.1/js/modernizr.custom.45394.js"></script>
<script src="index_files/ioslides-13.5.1/js/prettify/prettify.js"></script>
<script src="index_files/ioslides-13.5.1/js/prettify/lang-r.js"></script>
<script src="index_files/ioslides-13.5.1/js/prettify/lang-yaml.js"></script>
<script src="index_files/ioslides-13.5.1/js/hammer.js"></script>
<script src="index_files/ioslides-13.5.1/js/slide-controller.js"></script>
<script src="index_files/ioslides-13.5.1/js/slide-deck.js"></script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!-- map slide visiblity events into shiny -->
<script>
  (function() {
    if (window.jQuery) {
       window.jQuery(document).on('slideleave', function(e) {
         window.jQuery(e.target).trigger('hidden');
      });
       window.jQuery(document).on('slideenter', function(e) {
         window.jQuery(e.target).trigger('shown');
      });
    }
  })();
</script>

</body>
</html>
